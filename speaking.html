<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Speaking</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <h1>Speaking</h1>
        <p>
            I：主観的<br>
            It：客観的<br>
            動詞の原形：確定している動作<br>
            to do：確定している基本<br>
            that SV：論理的
        </p>
        <select id="subject" onchange="loadData()" aria-label="主語選択">
            <option value="expression-i.json">I</option>
            <option value="expression-you.json">You</option>
            <option value="expression-it.json">It</option>
        </select>
        <select id="category-filter" onchange="filterList()" aria-label="カテゴリ選択">
            <option value="基本">基本</option>
            <option value="状態">状態</option>
            <option value="意見">意見</option>
        </select>
        <ul id="list"></ul>
        <div id="popup" class="modal">
            <div class="modal-content">
                <span id="close-btn">&times;</span>
                <p id="phrase"></p>
                <p id="meaning"></p>
                
            </div>
        </div>
        <script>
            let data = [];
            document.addEventListener("DOMContentLoaded", function () {
                loadData();
            });

            // 主語に応じてJSONを読み込む
            function loadData() {
                const filename = document.getElementById("subject").value;
                fetch(filename)
                    .then(response => response.json())
                    .then(json => {
                    data = json;
                    filterList();
                    })
                    .catch(error => console.error("JSON の読み込みエラー:", error));
            }

            // フィルタ
            function filterList() {
                const selectedCategory = document.getElementById("category-filter").value;
                const listElement = document.getElementById("list");
                listElement.innerHTML = "";
                const filteredData = data.filter(item => item.category === selectedCategory);

                filteredData.forEach(item => {
                    const li = document.createElement("li");
                    li.textContent = item.phrase;
                    li.className = "list-item";

                    // モーダル表示処理
                    li.onclick = function () {
                        document.getElementById("phrase").textContent = item.phrase;
                        document.getElementById("meaning").textContent = item.meaning;
                        document.getElementById("popup").style.display = "flex";
                    };
                    listElement.appendChild(li);
                });
            }

            // リストを表示
            function renderList(filteredData) {
                const list = document.getElementById("list");
                list.innerHTML = "";
                filteredData.forEach(item => {
                const li = document.createElement("li");
                li.textContent = item.phrase;
                list.appendChild(li);
                });
            }

            document.getElementById("close-btn").onclick = function () {
                document.getElementById("popup").style.display = "none";
            };
        </script>
    </main>
</body>
</html>